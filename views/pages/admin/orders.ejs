<div class="card shadow-sm mb-4">
    <form class="card-header py-3" id="order-filter-form">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
            <div class="input-group" style="max-width: 400px;">
                <input type="text" name="q" id="order-search-input" class="form-control" placeholder="Tìm mã đơn, email, tên KH..." value="<%= q %>">
                <button class="btn btn-primary" type="submit" disabled style="display: none;"> <i class="fas fa-search fa-sm"></i>
                </button>
            </div>
            
            <div class="d-flex align-items-center gap-2">
                <span class="text-nowrap fw-bold text-primary" id="filter-title"><%= filterTitle %></span>
                <div class="dropdown no-arrow">
                    <a class="dropdown-toggle btn btn-sm btn-outline-secondary" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-filter fa-sm fa-fw"></i> Lọc Nhanh (Thời gian)
                    </a>
                    <div class="dropdown-menu dropdown-menu-end shadow">
                        <a class="dropdown-item filter-link" href="#" data-filter="all">Tất cả</a>
                        <a class="dropdown-item filter-link" href="#" data-filter="today">Hôm nay</a>
                        <a class="dropdown-item filter-link" href="#" data-filter="yesterday">Hôm qua</a>
                        <a class="dropdown-item filter-link" href="#" data-filter="this_week">Tuần này</a>
                        <a class="dropdown-item filter-link" href="#" data-filter="this_month">Tháng này</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-3 align-items-end mt-2">
            <div class="col-md-4">
                <label for="order-sort-select" class="form-label mb-0" style="font-size: 1.3rem;">Sắp xếp</label>
                <select id="order-sort-select" name="sort" class="form-select form-select-sm">
                    <option value="newest" <%= sort === 'newest' ? 'selected' : '' %>>Mới nhất</option>
                    <option value="oldest" <%= sort === 'oldest' ? 'selected' : '' %>>Cũ nhất</option>
                    <option value="total_desc" <%= sort === 'total_desc' ? 'selected' : '' %>>Giá trị (Cao-Thấp)</option>
                    <option value="total_asc" <%= sort === 'total_asc' ? 'selected' : '' %>>Giá trị (Thấp-Cao)</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="order-status-select" class="form-label mb-0" style="font-size: 1.3rem;">Trạng thái Đơn hàng</label>
                <select id="order-status-select" name="o_status" class="form-select form-select-sm">
                    <option value="all" <%= o_status === 'all' ? 'selected' : '' %>>Tất cả Trạng thái</option>
                    <option value="Pending" <%= o_status === 'Pending' ? 'selected' : '' %>>Chờ xác nhận (Pending)</option>
                    <option value="Confirmed" <%= o_status === 'Confirmed' ? 'selected' : '' %>>Đã xác nhận (Confirmed)</option>
                    <option value="Shipping" <%= o_status === 'Shipping' ? 'selected' : '' %>>Đang giao (Shipping)</option>
                    <option value="Delivered" <%= o_status === 'Delivered' ? 'selected' : '' %>>Đã giao (Delivered)</option>
                    <option value="Cancelled" <%= o_status === 'Cancelled' ? 'selected' : '' %>>Đã hủy (Cancelled)</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="payment-status-select" class="form-label mb-0" style="font-size: 1.3rem;">Thanh toán</label>
                <select id="payment-status-select" name="p_status" class="form-select form-select-sm">
                    <option value="all" <%= p_status === 'all' ? 'selected' : '' %>>Tất cả Thanh toán</option>
                    <option value="paid" <%= p_status === 'paid' ? 'selected' : '' %>>Đã thanh toán</option>
                    <option value="pending" <%= p_status === 'pending' ? 'selected' : '' %>>Chờ thanh toán</option>
                    <option value="cod" <%= p_status === 'cod' ? 'selected' : '' %>>Là đơn COD</option>
                </select>
            </div>
        </div>
    </form>
    
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered table-hover" width="100%" cellspacing="0">
                <thead>
                    </thead>
                <tbody id="orders-table-body">
                    <% orders.forEach(order => { %>
                        <tr>
                            </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
        <nav class="pagination-wrap mt-4 d-flex justify-content-center" id="orders-pagination">
             </nav>
    </div>
</div>